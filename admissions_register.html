<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Registration</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #fff;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .shapes span {
      position: absolute;
      display: block;
      background: rgba(0, 102, 204, 0.3);
      border-radius: 50%;
      animation: float 10s linear infinite;
    }
    .shapes span:nth-child(2n) {
      background: rgba(255, 215, 0, 0.3);
      border-radius: 0;
      transform: rotate(45deg);
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateY(-10vh) rotate(360deg);
        opacity: 0;
      }
    }

    .container {
      width: 90%;
      max-width: 900px;
      margin: 50px auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      padding: 30px;
    }

    .stepper {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      position: relative;
    }

    .step {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      transition: background 0.3s;
    }

    .step.active {
      background: #0066cc;
      color: white;
    }

    .step.completed {
      background: #ffd700;
      color: white;
    }

    .stepper::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 20px;
      right: 20px;
      height: 4px;
      background: #ccc;
      z-index: 1;
    }

    form {
      display: none;
    }

    form.active {
      display: block;
    }

    .form-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .form-group input,
    .form-group select {
      flex: 1 1 calc(50% - 15px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-group input:hover,
    .form-group select:hover {
      border-color: #0066cc;
      box-shadow: 0 0 5px #0066cc;
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: #ffd700;
      box-shadow: 0 0 5px #ffd700;
      outline: none;
    }

    .form-group input.invalid,
    .form-group select.invalid {
      border-color: red;
      box-shadow: 0 0 5px red;
    }

    .buttons {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }

    .buttons button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    .prev-btn {
      background: #ccc;
    }

    .next-btn {
      background: #0066cc;
      color: white;
    }

    .submit-btn {
      background: #ffd700;
      color: black;
    }

    .review-summary {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 10px;
      font-size: 15px;
      line-height: 1.5;
    }

    .review-summary strong {
      display: inline-block;
      width: 150px;
    }
  </style>
</head>
<body>
  <!-- Floating shapes -->
  <div class="shapes">
    <span style="width:40px;height:40px;left:10%;animation-duration:12s;"></span>
    <span style="width:30px;height:30px;left:30%;animation-duration:10s;"></span>
    <span style="width:50px;height:50px;left:50%;animation-duration:14s;"></span>
    <span style="width:20px;height:20px;left:70%;animation-duration:8s;"></span>
    <span style="width:60px;height:60px;left:90%;animation-duration:16s;"></span>
  </div>

  <div class="container">
    <!-- Stepper -->
    <div class="stepper">
      <div class="step active" data-step="1">1</div>
      <div class="step" data-step="2">2</div>
      <div class="step" data-step="3">3</div>
      <div class="step" data-step="4">✔</div>
    </div>

    <!-- Step 1 -->
    <form id="step-1" class="active">
      <h2>Step 1 – Student Info</h2>
      <div class="form-group">
        <input type="text" name="firstname" placeholder="First Name" required>
        <input type="text" name="middlename" placeholder="Middle Name" required>
        <input type="text" name="lastname" placeholder="Last Name" required>
        <input type="text" name="suffix" placeholder="Suffix">
        <input type="text" name="address" placeholder="Address" required>
        <input type="text" name="birthplace" placeholder="Birthplace" required>
        <input type="text" name="phone" placeholder="Phone (10-15 digits)" pattern="[0-9]{10,15}" required>
        <input type="date" name="birthdate" required>
        <select name="gender" required>
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <select name="nationality">
          <option value="">Select Nationality (optional)</option>
          <option value="Filipino">Filipino</option>
          <option value="American">American</option>
          <option value="Japanese">Japanese</option>
        </select>
      </div>
      <div class="buttons">
        <button type="button" class="next-btn">Next</button>
      </div>
    </form>

    <!-- Step 2 -->
    <form id="step-2">
      <h2>Step 2 – Education</h2>
      <div class="form-group">
        <input type="text" name="primary_school" placeholder="Primary School" required>
        <input type="number" name="primary_year" placeholder="Primary Year" min="1900" max="2099" required>
        <input type="text" name="secondary_school" placeholder="Secondary School" required>
        <input type="number" name="secondary_year" placeholder="Secondary Year" min="1900" max="2099" required>
        <input type="text" name="tertiary_school" placeholder="Tertiary School (optional)">
        <input type="number" name="tertiary_year" placeholder="Tertiary Year (optional)" min="1900" max="2099">
        <input type="text" name="course_graduated" placeholder="Course Graduated (optional)">
      </div>
      <div class="buttons">
        <button type="button" class="prev-btn">Previous</button>
        <button type="button" class="next-btn">Next</button>
      </div>
    </form>

    <!-- Step 3 -->
    <form id="step-3">
      <h2>Step 3 – Guardian Info</h2>
      <div class="form-group">
        <input type="text" name="guardian_f_name" placeholder="Guardian First Name" required>
        <input type="text" name="guardian_m_name" placeholder="Guardian Middle Name" required>
        <input type="text" name="guardian_l_name" placeholder="Guardian Last Name" required>
        <input type="text" name="guardian_suffix" placeholder="Suffix">
        <input type="text" name="guardian_address" placeholder="Address" required>
        <input type="text" name="guardian_relationship" placeholder="Relationship" required>
        <input type="text" name="guardian_phone" placeholder="Phone (10-15 digits)" pattern="[0-9]{10,15}" required>
      </div>
      <div class="buttons">
        <button type="button" class="prev-btn">Previous</button>
        <button type="button" class="next-btn">Next</button>
      </div>
    </form>

    <!-- Step 4 -->
    <form id="step-4">
      <h2>Step 4 – Review & Submit</h2>
      <div class="review-summary" id="review-summary"></div>
      <div class="buttons">
        <button type="button" class="prev-btn">Previous</button>
        <button type="submit" class="submit-btn">Submit</button>
      </div>
    </form>
  </div>

  <script>
    const steps = document.querySelectorAll(".step");
    const forms = document.querySelectorAll("form");
    const nextBtns = document.querySelectorAll(".next-btn");
    const prevBtns = document.querySelectorAll(".prev-btn");
    const summaryBox = document.getElementById("review-summary");

    let currentStep = 0;

    function showStep(step) {
      forms.forEach((form, i) => {
        form.classList.toggle("active", i === step);
        steps[i].classList.toggle("active", i === step);
        steps[i].classList.toggle("completed", i < step);
      });

      // Build review summary if on last step
      if (step === 3) {
        const allInputs = document.querySelectorAll("input, select");
        let html = "";
        allInputs.forEach(input => {
          const label = input.placeholder || input.name.replace(/_/g, ' ');
          const value = input.value ? input.value : "—";
          if (input.name) {
            html += `<p><strong>${label}:</strong> ${value}</p>`;
          }
        });
        summaryBox.innerHTML = html;
      }
    }

    nextBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        const form = forms[currentStep];
        let isValid = true;

        // Reset previous invalid styles
        const inputs = form.querySelectorAll("input, select");
        inputs.forEach(input => input.classList.remove("invalid"));

        // Check validity manually
        inputs.forEach(input => {
          if (!input.checkValidity()) {
            input.classList.add("invalid");
            isValid = false;
          }
        });

        if (!isValid) {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Please correct the highlighted fields.'
          });
          return;
        }

        currentStep++;
        showStep(currentStep);
      });
    });

    prevBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        currentStep--;
        showStep(currentStep);
      });
    });

    forms[forms.length - 1].addEventListener("submit", (e) => {
      e.preventDefault();
      Swal.fire({
        icon: 'success',
        title: 'Submitted!',
        text: 'Form submitted successfully!'
      });
    });

    showStep(currentStep);
  </script>
</body>
</html>
